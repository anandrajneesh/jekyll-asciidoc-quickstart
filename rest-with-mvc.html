<!doctype html>
<!--[if IE 9]>
<html class="lt-ie10" lang="en"> <![endif]-->
<html class="no-js" lang="en" data-useragent="Mozilla/5.0 (compatible; MSIE 10.0; Windows NT 6.2; Trident/6.0)">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <meta name="description" content="The Jekyll AsciiDoc Quickstart project is a leg-up in starting your own website hosted on GitHub with content based in AsciiDoc.">
    <meta name="author" content="Your name goes here">
    <meta name="copyright" content="Maybe consider a Creative Commons license">
    <link rel="stylesheet" href="css/foundation.css">
    <link rel="stylesheet" href="css/font-awesome.css">
    <link rel="stylesheet" href="css/coderay.css">
    <link rel="stylesheet" href="css/asciidoctor.css">
    <script src="js/vendor/modernizr.js"></script>
    <script src="js/toc.js"></script>
</head>
<body>


<!-- Nav Bar -->

<nav class="top-bar" data-topbar>
    <ul class="title-area">
        <!-- Title Area -->
        <li class="name">
            <h1>
                <a href="">Jekyll AsciiDoc Quickstart</a>
            </h1>
        </li>
        <li class="toggle-topbar menu-icon"><a href="#"><span>Menu</span></a></li>
    </ul>
</nav>
<!-- End Nav -->


<!-- Main Page Content and Sidebar -->

<div class="row">

    <!-- Main Blog Content -->
    <div class="large-9 columns" role="content">

        <div class="sect2">
<h3 id="getting-started-with-rest-using-spring-mvc">Getting started with REST using Spring MVC</h3>
<div class="paragraph">
<p>Here basic REST APIs that are needed for <a href="/domain.md">Library sytem</a>
will be written i.e. CRUD(Create, Retrieve, Update and Delete) REST
service on entity <code>Book</code>. As per the <a href="/domain.md">specs</a> the
<code>Retrieve/ Get</code> method will be available to both Member and Admin, only
the representation will differ. For the simplicity of this topic, same
representation will be returned in <code>GET</code> call. Different representations
will be added once security/roles are added to application since the
implementation or calls may differ. Also handling for exception
scenarios will be added in later topics.</p>
</div>
<div class="paragraph">
<p>Code reference:
<a href="https://github.com/GlueCoders/springboot-guide/releases/tag/rest-with-mvc" class="bare">https://github.com/GlueCoders/springboot-guide/releases/tag/rest-with-mvc</a></p>
</div>
<div class="sect4">
<h5 id="entity-definition-book">Entity Definition : Book</h5>
<div class="paragraph">
<p>Below is the definition of Book, this is the representation that will be
mapped to REST responses and requests.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public class Book implements Serializable {

    private String title;
    private String author;
    private int publishedYear;
    private List&lt;String&gt; categories;
    private String publisher;
    private long isbnCode;
}</pre>
</div>
</div>
</div>
<div class="sect4">
<h5 id="rest-layer-books">REST Layer : Books</h5>
<div class="paragraph">
<p>This class serves as REST layer which will be mapped to HTTP requests.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>package org.gluecoders.library.rest;

import org.gluecoders.library.models.Book;
import org.gluecoders.library.services.BookService;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.http.MediaType;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;

import java.util.List;

@RestController()
@RequestMapping(produces = MediaType.APPLICATION_JSON_UTF8_VALUE, path = "/books")
public class Books {

    @Autowired
    private BookService bookService;

    @GetMapping
    public ResponseEntity&lt;List&lt;Book&gt;&gt; getAllBooks() {
        List&lt;Book&gt; list = bookService.getAllBooks();
        return new ResponseEntity&lt;&gt;(list, HttpStatus.OK);
    }

    @GetMapping("/{isbn}")
    public ResponseEntity&lt;Book&gt; getBook(@PathVariable("isbn") long isbnCode) {
        Book book = bookService.getBookByISBN(isbnCode);
        if(book == null) {
            return new ResponseEntity&lt;&gt;(HttpStatus.NOT_FOUND);
        }else{
            return new ResponseEntity&lt;&gt;(book, HttpStatus.OK);
        }
    }

    @PostMapping
    public ResponseEntity&lt;Book&gt; addBook(@RequestBody Book book) {
        book = bookService.addBook(book);
        return new ResponseEntity&lt;&gt;(book, HttpStatus.CREATED);
    }

    @DeleteMapping("/{isbn}")
    public ResponseEntity deleteBook(@PathVariable("isbn") long isbnCode) {
        bookService.deleteBook(isbnCode);
        return new ResponseEntity(HttpStatus.OK);
    }

}</pre>
</div>
</div>
<div class="paragraph">
<p>Let&#8217;s go to individual lines : - <code>@RestController</code> - Tells Spring to map
the methods of this class to HTTP requests.<br>
- <code>@RequestMapping</code> - Defines the HTTP path that should be mapped to the
controller class. - <code>@GetMapping . @PostMapping, @DeleteMapping</code> - These
annotations are flavoured <code>@RequestMapping</code> which define HTTP methods as
well. These annotations have parameters for HTTP path, Content-Type and
Accept parameters.<br>
- <code>ResponseEntity</code> - This is used to return response body, headers and
status code.</p>
</div>
</div>
<div class="sect4">
<h5 id="businessservice-layer-bookservice">Business/Service Layer : BookService</h5>
<div class="paragraph">
<p>Below is the interface to be consumed by REST layer in our application.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>public interface BookService {

    List&lt;Book&gt; getAllBooks();

    Book addBook(Book book);

    Book getBookByISBN(long isbn);

    void deleteBook(long isbn);
}</pre>
</div>
</div>
<div class="paragraph">
<p>Below is the default implementation of this interface, which as of now
will do nothing but just return null or empty lists as required from
signature.</p>
</div>
<div class="literalblock">
<div class="content">
<pre>package org.gluecoders.library.services;

import org.gluecoders.library.models.Book;
import org.springframework.stereotype.Component;

import java.util.Collections;
import java.util.List;

@Component
public class DefaultBookService implements BookService {


    @Override
    public List&lt;Book&gt; getAllBooks() {
        return Collections.emptyList();
    }

    @Override
    public Book addBook(Book book) {
        return book;
    }

    @Override
    public Book getBookByISBN(long isbn) {
        return null;
    }

    @Override
    public void deleteBook(long isbn) {

    }
}</pre>
</div>
</div>
<div class="paragraph">
<p><code>@Component</code> is a Spring annotation which creates a instance of the
class and registers it in Bean Registry. Anywhere this bean&#8217;s instance
can be acquired by using <code>@Autowired</code> annotation as shown in REST layer.</p>
</div>
</div>
</div>

    </div>

    <!-- End Main Content -->

    <!-- Sidebar -->

    <aside class="large-3 columns">

        <h4>Posts</h4>
        <ul id="posts" class="posts nav">
            
        </ul>

        <div class="panel">
            <h5>Featured</h5>

            <p>Pork drumstick turkey fugiat. Tri-tip elit turducken pork chop in. Swine short ribs meatball irure bacon
                nulla pork belly cupidatat meatloaf cow.</p>
        </div>

    </aside>

    <!-- End Sidebar -->
</div>

<!-- End Main Content and Sidebar -->


<!-- Footer -->

<footer class="row">
    <div class="large-12 columns">
        <hr>
        <div class="row">
            <div class="large-12 columns">
                <p>Footer</p>
            </div>
        </div>
    </div>
</footer>

<script src="js/vendor/jquery.js"></script>
<script src="js/foundation.min.js"></script>
<script>
$(document).foundation();
var doc = document.documentElement;
doc.setAttribute('data-useragent', navigator.userAgent);
</script>
</body>
</html>
